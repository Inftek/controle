{% extends "::base.html.twig" %}

{% block title %}MRSControleBundle:SerializerController:financas{% endblock %}

{% block body %}
<h1>Welcome to the SerializerController:financas page</h1>
{{ 'error.message' | trans({},'messages') }}
    {{  dump(entity) }}


    <div id="loaddata">teste</div>

    <div class="">
        <canvas id="grafico" width="40" height="40"> </canvas>
    </div>

{% endblock %}

{% block javascripts %}
{{ parent() }}

    <script src="{{ asset('https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.0.1/Chart.js') }}"></script>

    <script>


        {#var ctx = document.getElementById("grafico").getContext("2d");#}

        var ctx = document.getElementById("grafico");

        {# var ctx = $("#grafico"); #}

        var myChart = new Chart(ctx, {

            type: 'bar',

            data: {
                labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
                datasets: [{
                    label: 'Quantidade de Votos',
                    data: [12, 19, 3, 5, 2, 3]
                }]
            },

            options: {
                responsive: true,
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero:true
                        }
                    }]
                }
            }
        });


        {#
        var $timer = jQuery.noConflict();
        $timer(document).ready(function() {


            function barsChart() {
                var data = {

                    labels: ["January", "February", "March", "April", "May", "June", "July"],

                    datasets: [
                        {
                            fillColor: "rgba(220,220,220,0.5)",
                            strokeColor: "rgba(220,220,220,1)",
                            pointColor: "rgba(220,220,220,1)",
                            pointStrokeColor: "#fff",
                            data: [65, 59, 90, 81, 56, 55, 40],
                            label: 'Tigers'
                        },
                        {
                            fillColor: "rgba(151,187,205,0.5)",
                            strokeColor: "rgba(151,187,205,1)",
                            pointColor: "rgba(151,187,205,1)",
                            pointStrokeColor: "#fff",
                            data: [28, 48, 40, 19, 96, 27, 100],
                            label: 'Bears'
                        }
                    ]
                };

                var ctx = document.getElementById("grafico").getContext("2d");

                new Chart(ctx).Bar(data);

                legend(document.getElementById("barsLegend"), data);
            }
        });
        #}

    </script>



    <script>

        var $timer = jQuery.noConflict();
        $timer(document).ready(function(){


            //alert('TESTE');

            $timer.ajax({

                url: '/jsonfinancas',

                success: function (data){

                    $timer("#loaddata").html(data);

                    $timer.each(data, function(key, value){

                        //alert( key + " : " + value );

                        console.log(key + " : " + value.fin_data_cadastro);
                        $timer("#loaddata").append(' - (' + value.fin_data_cadastro + ' - ' + value.fin_valor + ')');

                    });

                    console.log(data);
                }



            });

        });

    </script>
{% endblock %}